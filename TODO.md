# 项目待办事项

本文档记录项目开发过程中的待办事项，用于任务分配和进度追踪。
任务按开发优先级排序。

## 待开发功能

### 🔴 高优先级

#### 交易执行模块
- [x] 实现交易队列处理器
- [x] 实现交易决策逻辑（判断是否执行交易）
- [x] 实现交易规模计算逻辑
- [x] 实现持仓数据模型
- [ ] 实现合约交易执行逻辑
- [ ] 实现现货对冲交易执行逻辑
- [ ] 实现交易确认与状态更新逻辑
- [ ] 实现交易结果处理与记录

#### 风险管理模块
- [x] 实现风险监控队列处理器
- [x] 实现清算风险监控逻辑
- [x] 实现对冲偏差监控逻辑
- [x] 实现风险缓解策略（调整杠杆、平仓等）
- [x] 实现持仓时间管理逻辑

### 🟠 中优先级

#### 通知系统
- [ ] 实现Telegram机器人集成
- [ ] 实现不同事件类型通知模板
- [ ] 实现通知优先级和频率控制
- [ ] 实现系统状态通知

#### 持久化存储
- [ ] 实现PostgreSQL数据库连接与配置
- [ ] 实现数据库表结构设计
- [ ] 实现交易记录持久化存储
- [ ] 实现资金费率历史数据持久化
- [ ] 实现系统日志持久化
- [ ] 实现数据库迁移脚本

### 🟢 低优先级

#### 数据分析与优化
- [ ] 实现资金费率历史数据分析
- [ ] 实现交易表现评估指标
- [ ] 实现策略参数优化算法
- [ ] 实现盈亏分析报告生成

#### 用户界面/API
- [ ] 设计RESTful API接口
- [ ] 实现系统状态查询接口
- [ ] 实现交易历史查询接口
- [ ] 实现手动操作接口
- [ ] 实现简单Web管理界面

## 优化与改进

### 测试
- [ ] 为交易所接口添加单元测试
- [ ] 为资金费率监控模块添加单元测试
- [ ] 为Redis存储模块添加单元测试
- [ ] 为交易执行模块添加单元测试
- [x] 为风险管理模块添加单元测试
- [ ] 设计集成测试用例
- [ ] 实现模拟环境测试

### 文档
- [ ] 完善API文档
- [ ] 编写架构设计文档
- [ ] 编写部署指南
- [ ] 编写用户手册
- [ ] 编写故障排除指南

### 性能与安全
- [ ] 优化Redis使用，减少网络往返
- [ ] 优化交易所API调用频率
- [ ] 添加请求重试和断路器逻辑
- [ ] 实现API密钥安全存储方案
- [ ] 实现资金使用限制措施
- [ ] 实现死锁和竞态条件预防

## 已完成任务

### 系统基础
- [x] 配置管理模块（YAML配置加载）
- [x] 交易所接口定义
- [x] CCXT交易所集成（Binance、OKX、Bitget）
- [x] 资金费率监控模块
- [x] Redis存储模块
- [x] 系统基础设施（启动/关闭逻辑）

### 交易执行基础
- [x] 交易模块数据结构设计
- [x] 持仓管理基础设施
- [x] 交易执行器框架
- [x] 交易规模计算算法
- [x] 杠杆优化算法
- [x] 交易队列处理循环

### 风险管理
- [x] 风险评估算法
- [x] 风险监控队列处理器
- [x] 风险分级处理策略
- [x] 持仓风险监控集成
- [x] 风险缓解建议生成

# 待办事项

- [ ] 修复 `internal/exchange/binance.go` 中的编译错误 (需要确认 ccxt 库函数签名) 